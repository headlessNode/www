<h1 id="relative-difference">Relative Difference</h1><blockquote><p>Compute the <a href="https://en.wikipedia.org/wiki/Relative_change_and_difference">relative difference</a> of two real numbers.</p></blockquote><section class="intro"><p>The <a href="https://en.wikipedia.org/wiki/Relative_change_and_difference">relative difference</a> of two real <code>numbers</code> is defined as</p><div class="equation" align="center" data-raw-text="\Delta(x,y) = \frac{|x - y|}{|f(x,y)|} = \left|\frac{x - y}{f(x,y)}\right|" data-equation="eq:relative_difference"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="30.935ex" height="6.509ex" style="vertical-align:-2.671ex" viewBox="0 -1652.5 13319.1 2802.6" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" aria-labelledby="MathJax-SVG-1-Title"><title id="MathJax-SVG-1-Title">normal upper Delta left-parenthesis x comma y right-parenthesis equals StartFraction StartAbsoluteValue x minus y EndAbsoluteValue Over StartAbsoluteValue f left-parenthesis x comma y right-parenthesis EndAbsoluteValue EndFraction equals StartAbsoluteValue StartFraction x minus y Over f left-parenthesis x comma y right-parenthesis EndFraction EndAbsoluteValue</title><defs aria-hidden="true"></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)" aria-hidden="true"><g transform="translate(4183,0)"><g transform="translate(397,0)"><g transform="translate(335,769)"></g><g transform="translate(60,-771)"></g></g></g><g transform="translate(9557,0)"><g transform="translate(0,1521)"><g transform="translate(0,-1431.7562887112888) scale(1,0.6401548451548452)"></g></g><g transform="translate(278,0)"><g transform="translate(120,0)"><g transform="translate(335,725)"></g><g transform="translate(60,-771)"></g></g></g><g transform="translate(3483,1521)"><g transform="translate(0,-1431.7562887112888) scale(1,0.6401548451548452)"></g></g></g></g></svg></div><p>where <code>|x-y|</code> is the <a href="/docs/api/latest/@stdlib/math/base/utils/absolute-difference">absolute difference</a> and <code>f(x,y)</code> is a scale function. Common scale functions include</p><div class="equation" align="center" data-raw-text="\begin{align*}f(x,y) &#x26;= \max(|x|, |y|)\\f(x,y) &#x26;= \max(x,y)\\ f(x,y) &#x26;= \min(|x|,|y|)\\f(x,y) &#x26;= \min(x,y) \\f(x,y) &#x26;= \frac{|x|+|y|}{2} \\f(x,y) &#x26;= \frac{x + y}{2}\end{align*}" data-equation="eq:scale_functions"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="22.699ex" height="23.509ex" style="vertical-align:-11.171ex" viewBox="0 -5312.2 9772.9 10122" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" aria-labelledby="MathJax-SVG-1-Title"><title id="MathJax-SVG-1-Title">StartLayout 1st Row 1st Column f left-parenthesis x comma y right-parenthesis 2nd Column equals max left-parenthesis StartAbsoluteValue x EndAbsoluteValue comma StartAbsoluteValue y EndAbsoluteValue right-parenthesis 2nd Row 1st Column f left-parenthesis x comma y right-parenthesis 2nd Column equals max left-parenthesis x comma y right-parenthesis 3rd Row 1st Column f left-parenthesis x comma y right-parenthesis 2nd Column equals min left-parenthesis StartAbsoluteValue x EndAbsoluteValue comma StartAbsoluteValue y EndAbsoluteValue right-parenthesis 4th Row 1st Column f left-parenthesis x comma y right-parenthesis 2nd Column equals min left-parenthesis x comma y right-parenthesis 5th Row 1st Column f left-parenthesis x comma y right-parenthesis 2nd Column equals StartFraction StartAbsoluteValue x EndAbsoluteValue plus StartAbsoluteValue y EndAbsoluteValue Over 2 EndFraction 6th Row 1st Column f left-parenthesis x comma y right-parenthesis 2nd Column equals StartFraction x plus y Over 2 EndFraction EndLayout</title><defs aria-hidden="true"></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)" aria-hidden="true"><g transform="translate(167,0)"><g transform="translate(-11,0)"><g transform="translate(0,4404)"></g><g transform="translate(0,3053)"></g><g transform="translate(0,1702)"></g><g transform="translate(0,351)"></g><g transform="translate(0,-1721)"></g><g transform="translate(0,-4017)"></g></g><g transform="translate(2834,0)"><g transform="translate(0,4404)"><g transform="translate(1334,0)"></g></g><g transform="translate(0,3053)"><g transform="translate(1334,0)"></g></g><g transform="translate(0,1702)"><g transform="translate(1334,0)"></g></g><g transform="translate(0,351)"><g transform="translate(1334,0)"></g></g><g transform="translate(0,-1721)"><g transform="translate(1056,0)"><g transform="translate(397,0)"><g transform="translate(60,769)"></g></g></g></g><g transform="translate(0,-4017)"><g transform="translate(1056,0)"><g transform="translate(397,0)"><g transform="translate(60,725)"></g></g></g></g></g></g></g></svg></div><p>The choice of scale function depends on application context.</p></section><section class="usage"><h2 id="usage">Usage</h2><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> reldiff = <span class="hljs-built_in">require</span>( <span class="hljs-string">'@stdlib/math/base/utils/relative-difference'</span> );
</code></pre><h4 id="reldiff-x-y-scale-">reldiff( x, y[, scale] )</h4><p>Computes the <a href="https://en.wikipedia.org/wiki/Relative_change_and_difference">relative difference</a> of two real numbers.</p><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> d = reldiff( <span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span> ); <span class="hljs-comment">// => 3/5</span>
<span class="hljs-comment">// returns 0.6</span>

d = reldiff( -<span class="hljs-number">1.0</span>, <span class="hljs-number">3.14</span> ); <span class="hljs-comment">// => 4.14/3.14</span>
<span class="hljs-comment">// returns ~1.318</span>
</code></pre><p>The following <code>scale</code> functions are supported:</p><ul><li><strong>max-abs</strong>: maximum <a href="/docs/api/latest/@stdlib/math/base/special/abs">absolute value</a> of <code>x</code> and <code>y</code> (<em>default</em>).</li><li><strong>max</strong>: maximum value of <code>x</code> and <code>y</code>.</li><li><strong>min-abs</strong>: minimum <a href="/docs/api/latest/@stdlib/math/base/special/abs">absolute value</a> of <code>x</code> and <code>y</code>.</li><li><strong>min</strong>: minimum value of <code>x</code> and <code>y</code>.</li><li><strong>mean-abs</strong>: arithmetic mean of the <a href="/docs/api/latest/@stdlib/math/base/special/abs">absolute values</a> of <code>x</code> and <code>y</code>.</li><li><strong>mean</strong>: arithmetic mean of <code>x</code> and <code>y</code>.</li><li><strong>x</strong>: <code>x</code> (<em>noncommutative</em>).</li><li><strong>y</strong>: <code>y</code> (<em>noncommutative</em>).</li></ul><p>By default, the function scales the <a href="/docs/api/latest/@stdlib/math/base/utils/absolute-difference">absolute difference</a> by dividing the <a href="/docs/api/latest/@stdlib/math/base/utils/absolute-difference">absolute difference</a> by the maximum <a href="/docs/api/latest/@stdlib/math/base/special/abs">absolute value</a> of <code>x</code> and <code>y</code>. To scale by a different function, specify a scale function name.</p><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> d = reldiff( -<span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span> ); <span class="hljs-comment">// => |-7/5|</span>
<span class="hljs-comment">// returns 1.4</span>

d = reldiff( -<span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-string">'max-abs'</span> ); <span class="hljs-comment">// => |-7/5|</span>
<span class="hljs-comment">// returns 1.4</span>

d = reldiff( -<span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-string">'max'</span> ); <span class="hljs-comment">// => |-7/5|</span>
<span class="hljs-comment">// returns 1.4</span>

d = reldiff( -<span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-string">'min-abs'</span> ); <span class="hljs-comment">// => |-7/2|</span>
<span class="hljs-comment">// returns 3.5</span>

d = reldiff( -<span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-string">'min'</span> ); <span class="hljs-comment">// => |-7/-2|</span>
<span class="hljs-comment">// returns 3.5</span>

d = reldiff( -<span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-string">'mean-abs'</span> ); <span class="hljs-comment">// => |-7/3.5|</span>
<span class="hljs-comment">// returns 2.0</span>

d = reldiff( -<span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-string">'mean'</span> ); <span class="hljs-comment">// => |-7/1.5|</span>
<span class="hljs-comment">// returns ~4.67</span>

d = reldiff( -<span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-string">'x'</span> ); <span class="hljs-comment">// => |-7/-2|</span>
<span class="hljs-comment">// returns 3.5</span>

d = reldiff( <span class="hljs-number">5.0</span>, -<span class="hljs-number">2.0</span>, <span class="hljs-string">'x'</span> ); <span class="hljs-comment">// => |7/5|</span>
<span class="hljs-comment">// returns 1.4</span>

d = reldiff( -<span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-string">'y'</span> ); <span class="hljs-comment">// => |-7/5|</span>
<span class="hljs-comment">// returns 1.4</span>

d = reldiff( <span class="hljs-number">5.0</span>, -<span class="hljs-number">2.0</span>, <span class="hljs-string">'y'</span> ); <span class="hljs-comment">// => |7/-2|</span>
<span class="hljs-comment">// returns 3.5</span>
</code></pre><p>To use a custom scale <code>function</code>, provide a <code>function</code> which accepts two numeric arguments <code>x</code> and <code>y</code>.</p><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> abs = <span class="hljs-built_in">require</span>( <span class="hljs-string">'@stdlib/math/base/special/abs'</span> );
<span class="hljs-keyword">var</span> EPS = <span class="hljs-built_in">require</span>( <span class="hljs-string">'@stdlib/constants/float64/eps'</span> );

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">scale</span>(<span class="hljs-params"> x, y </span>) </span>{
    <span class="hljs-keyword">var</span> s;
    x = abs( x );
    y = abs( y );

    <span class="hljs-comment">// Maximum absolute value:</span>
    s = (x &#x3C; y ) ? y : x;

    <span class="hljs-comment">// Scale in units of epsilon:</span>
    <span class="hljs-keyword">return</span> s * EPS;
}

<span class="hljs-keyword">var</span> d = reldiff( <span class="hljs-number">12.15</span>, <span class="hljs-number">12.149999999999999</span>, scale );
<span class="hljs-comment">// returns ~0.658</span>
</code></pre></section><section class="notes"><h2 id="notes">Notes</h2><ul><li><p>If the <a href="/docs/api/latest/@stdlib/math/base/utils/absolute-difference">absolute difference</a> of <code>x</code> and <code>y</code> is <code>0</code>, the relative difference is <strong>always</strong> <code>0</code>.</p><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> d = reldiff( <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span> );
<span class="hljs-comment">// returns 0.0</span>

d = reldiff( <span class="hljs-number">3.14</span>, <span class="hljs-number">3.14</span> );
<span class="hljs-comment">// returns 0.0</span>
</code></pre></li><li><p>If <code>|x| = |y| = infinity</code>, the function returns <code>NaN</code>.</p><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> d = reldiff( <span class="hljs-literal">Infinity</span>, <span class="hljs-literal">Infinity</span> );
<span class="hljs-comment">// returns NaN</span>

d = reldiff( -<span class="hljs-literal">Infinity</span>, -<span class="hljs-literal">Infinity</span> );
<span class="hljs-comment">// returns NaN</span>
</code></pre></li><li><p>If <code>|x| = |-y| = infinity</code>, the relative difference is <code>+infinity</code>.</p><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> d = reldiff( <span class="hljs-literal">Infinity</span>, -<span class="hljs-literal">Infinity</span> );
<span class="hljs-comment">// returns Infinity</span>

d = reldiff( -<span class="hljs-literal">Infinity</span>, <span class="hljs-literal">Infinity</span> );
<span class="hljs-comment">// returns Infinity</span>
</code></pre></li><li><p>If a <code>scale</code> function returns <code>0</code>, the function returns <code>NaN</code>.</p><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> d = reldiff( <span class="hljs-number">0.0</span>, <span class="hljs-number">2.0</span>, <span class="hljs-string">'mean'</span> ); <span class="hljs-comment">// => |2/1|</span>
<span class="hljs-comment">// returns 2.0</span>

d = reldiff( -<span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-string">'mean'</span> ); <span class="hljs-comment">// => |2/0|</span>
<span class="hljs-comment">// returns NaN</span>
</code></pre></li></ul></section><section class="examples"><h2 id="examples">Examples</h2><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> randu = <span class="hljs-built_in">require</span>( <span class="hljs-string">'@stdlib/random/base/randu'</span> );
<span class="hljs-keyword">var</span> reldiff = <span class="hljs-built_in">require</span>( <span class="hljs-string">'@stdlib/math/base/utils/relative-difference'</span> );

<span class="hljs-keyword">var</span> scales = [ <span class="hljs-string">'max-abs'</span>, <span class="hljs-string">'max'</span>, <span class="hljs-string">'min-abs'</span>, <span class="hljs-string">'min'</span>, <span class="hljs-string">'mean-abs'</span>, <span class="hljs-string">'mean'</span>, <span class="hljs-string">'x'</span>, <span class="hljs-string">'y'</span> ];
<span class="hljs-keyword">var</span> x;
<span class="hljs-keyword">var</span> y;
<span class="hljs-keyword">var</span> d;
<span class="hljs-keyword">var</span> i;
<span class="hljs-keyword">var</span> j;

<span class="hljs-keyword">for</span> ( i = <span class="hljs-number">0</span>; i &#x3C; <span class="hljs-number">100</span>; i++ ) {
    x = ( randu()*<span class="hljs-number">1.0e4</span> ) - <span class="hljs-number">5.0e3</span>;
    y = ( randu()*<span class="hljs-number">1.0e4</span> ) - <span class="hljs-number">5.0e3</span>;
    <span class="hljs-keyword">for</span> ( j = <span class="hljs-number">0</span>; j &#x3C; scales.length; j++ ) {
        d = reldiff( x, y, scales[j] );
        <span class="hljs-built_in">console</span>.log( <span class="hljs-string">'x = %d. y = %d. d = %d. scale: %s.'</span>, x, y, d, scales[j] );
    }
}
</code></pre></section><section class="related"><hr><h2 id="see-also">See Also</h2><ul><li><span class="package-name"><a href="/docs/api/latest/@stdlib/math/base/utils/absolute-difference"><code>@stdlib/math/base/utils/absolute-difference</code></a></span><span class="delimiter">: </span><span class="description">compute the absolute difference of two real numbers.</span></li><li><span class="package-name"><a href="/docs/api/latest/@stdlib/math/base/utils/float64-epsilon-difference"><code>@stdlib/math/base/utils/float64-epsilon-difference</code></a></span><span class="delimiter">: </span><span class="description">compute the relative difference of two real numbers in units of double-precision floating-point epsilon.</span></li></ul></section>