<h1 id="relative-difference">Relative Difference</h1><blockquote><p>Compute the <a href="https://en.wikipedia.org/wiki/Relative_change_and_difference">relative difference</a> of two real numbers.</p></blockquote><section class="intro"><p>The <a href="https://en.wikipedia.org/wiki/Relative_change_and_difference">relative difference</a> of two real <code>numbers</code> is defined as</p><p>where <code>|x-y|</code> is the <a href="/docs/api/latest/@stdlib/math/base/utils/absolute-difference">absolute difference</a> and <code>f(x,y)</code> is a scale function. Common scale functions include</p><p>The choice of scale function depends on application context.</p></section><section class="usage"><h2 id="usage">Usage</h2><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> reldiff = <span class="hljs-built_in">require</span>( <span class="hljs-string">'@stdlib/math/base/utils/relative-difference'</span> );
</code></pre><h4 id="reldiff-x-y-scale-">reldiff( x, y[, scale] )</h4><p>Computes the <a href="https://en.wikipedia.org/wiki/Relative_change_and_difference">relative difference</a> of two real numbers.</p><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> d = reldiff( <span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span> ); <span class="hljs-comment">// => 3/5</span>
<span class="hljs-comment">// returns 0.6</span>

d = reldiff( -<span class="hljs-number">1.0</span>, <span class="hljs-number">3.14</span> ); <span class="hljs-comment">// => 4.14/3.14</span>
<span class="hljs-comment">// returns ~1.318</span>
</code></pre><p>The following <code>scale</code> functions are supported:</p><ul><li><strong>max-abs</strong>: maximum <a href="/docs/api/latest/@stdlib/math/base/special/abs">absolute value</a> of <code>x</code> and <code>y</code> (<em>default</em>).</li><li><strong>max</strong>: maximum value of <code>x</code> and <code>y</code>.</li><li><strong>min-abs</strong>: minimum <a href="/docs/api/latest/@stdlib/math/base/special/abs">absolute value</a> of <code>x</code> and <code>y</code>.</li><li><strong>min</strong>: minimum value of <code>x</code> and <code>y</code>.</li><li><strong>mean-abs</strong>: arithmetic mean of the <a href="/docs/api/latest/@stdlib/math/base/special/abs">absolute values</a> of <code>x</code> and <code>y</code>.</li><li><strong>mean</strong>: arithmetic mean of <code>x</code> and <code>y</code>.</li><li><strong>x</strong>: <code>x</code> (<em>noncommutative</em>).</li><li><strong>y</strong>: <code>y</code> (<em>noncommutative</em>).</li></ul><p>By default, the function scales the <a href="/docs/api/latest/@stdlib/math/base/utils/absolute-difference">absolute difference</a> by dividing the <a href="/docs/api/latest/@stdlib/math/base/utils/absolute-difference">absolute difference</a> by the maximum <a href="/docs/api/latest/@stdlib/math/base/special/abs">absolute value</a> of <code>x</code> and <code>y</code>. To scale by a different function, specify a scale function name.</p><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> d = reldiff( -<span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span> ); <span class="hljs-comment">// => |-7/5|</span>
<span class="hljs-comment">// returns 1.4</span>

d = reldiff( -<span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-string">'max-abs'</span> ); <span class="hljs-comment">// => |-7/5|</span>
<span class="hljs-comment">// returns 1.4</span>

d = reldiff( -<span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-string">'max'</span> ); <span class="hljs-comment">// => |-7/5|</span>
<span class="hljs-comment">// returns 1.4</span>

d = reldiff( -<span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-string">'min-abs'</span> ); <span class="hljs-comment">// => |-7/2|</span>
<span class="hljs-comment">// returns 3.5</span>

d = reldiff( -<span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-string">'min'</span> ); <span class="hljs-comment">// => |-7/-2|</span>
<span class="hljs-comment">// returns 3.5</span>

d = reldiff( -<span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-string">'mean-abs'</span> ); <span class="hljs-comment">// => |-7/3.5|</span>
<span class="hljs-comment">// returns 2.0</span>

d = reldiff( -<span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-string">'mean'</span> ); <span class="hljs-comment">// => |-7/1.5|</span>
<span class="hljs-comment">// returns ~4.67</span>

d = reldiff( -<span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-string">'x'</span> ); <span class="hljs-comment">// => |-7/-2|</span>
<span class="hljs-comment">// returns 3.5</span>

d = reldiff( <span class="hljs-number">5.0</span>, -<span class="hljs-number">2.0</span>, <span class="hljs-string">'x'</span> ); <span class="hljs-comment">// => |7/5|</span>
<span class="hljs-comment">// returns 1.4</span>

d = reldiff( -<span class="hljs-number">2.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-string">'y'</span> ); <span class="hljs-comment">// => |-7/5|</span>
<span class="hljs-comment">// returns 1.4</span>

d = reldiff( <span class="hljs-number">5.0</span>, -<span class="hljs-number">2.0</span>, <span class="hljs-string">'y'</span> ); <span class="hljs-comment">// => |7/-2|</span>
<span class="hljs-comment">// returns 3.5</span>
</code></pre><p>To use a custom scale <code>function</code>, provide a <code>function</code> which accepts two numeric arguments <code>x</code> and <code>y</code>.</p><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> abs = <span class="hljs-built_in">require</span>( <span class="hljs-string">'@stdlib/math/base/special/abs'</span> );
<span class="hljs-keyword">var</span> EPS = <span class="hljs-built_in">require</span>( <span class="hljs-string">'@stdlib/constants/float64/eps'</span> );

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">scale</span>(<span class="hljs-params"> x, y </span>) </span>{
    <span class="hljs-keyword">var</span> s;
    x = abs( x );
    y = abs( y );

    <span class="hljs-comment">// Maximum absolute value:</span>
    s = (x &#x3C; y ) ? y : x;

    <span class="hljs-comment">// Scale in units of epsilon:</span>
    <span class="hljs-keyword">return</span> s * EPS;
}

<span class="hljs-keyword">var</span> d = reldiff( <span class="hljs-number">12.15</span>, <span class="hljs-number">12.149999999999999</span>, scale );
<span class="hljs-comment">// returns ~0.658</span>
</code></pre></section><section class="notes"><h2 id="notes">Notes</h2><ul><li><p>If the <a href="/docs/api/latest/@stdlib/math/base/utils/absolute-difference">absolute difference</a> of <code>x</code> and <code>y</code> is <code>0</code>, the relative difference is <strong>always</strong> <code>0</code>.</p><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> d = reldiff( <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span> );
<span class="hljs-comment">// returns 0.0</span>

d = reldiff( <span class="hljs-number">3.14</span>, <span class="hljs-number">3.14</span> );
<span class="hljs-comment">// returns 0.0</span>
</code></pre></li><li><p>If <code>|x| = |y| = infinity</code>, the function returns <code>NaN</code>.</p><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> d = reldiff( <span class="hljs-literal">Infinity</span>, <span class="hljs-literal">Infinity</span> );
<span class="hljs-comment">// returns NaN</span>

d = reldiff( -<span class="hljs-literal">Infinity</span>, -<span class="hljs-literal">Infinity</span> );
<span class="hljs-comment">// returns NaN</span>
</code></pre></li><li><p>If <code>|x| = |-y| = infinity</code>, the relative difference is <code>+infinity</code>.</p><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> d = reldiff( <span class="hljs-literal">Infinity</span>, -<span class="hljs-literal">Infinity</span> );
<span class="hljs-comment">// returns Infinity</span>

d = reldiff( -<span class="hljs-literal">Infinity</span>, <span class="hljs-literal">Infinity</span> );
<span class="hljs-comment">// returns Infinity</span>
</code></pre></li><li><p>If a <code>scale</code> function returns <code>0</code>, the function returns <code>NaN</code>.</p><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> d = reldiff( <span class="hljs-number">0.0</span>, <span class="hljs-number">2.0</span>, <span class="hljs-string">'mean'</span> ); <span class="hljs-comment">// => |2/1|</span>
<span class="hljs-comment">// returns 2.0</span>

d = reldiff( -<span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-string">'mean'</span> ); <span class="hljs-comment">// => |2/0|</span>
<span class="hljs-comment">// returns NaN</span>
</code></pre></li></ul></section><section class="examples"><h2 id="examples">Examples</h2><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> randu = <span class="hljs-built_in">require</span>( <span class="hljs-string">'@stdlib/random/base/randu'</span> );
<span class="hljs-keyword">var</span> reldiff = <span class="hljs-built_in">require</span>( <span class="hljs-string">'@stdlib/math/base/utils/relative-difference'</span> );

<span class="hljs-keyword">var</span> scales = [ <span class="hljs-string">'max-abs'</span>, <span class="hljs-string">'max'</span>, <span class="hljs-string">'min-abs'</span>, <span class="hljs-string">'min'</span>, <span class="hljs-string">'mean-abs'</span>, <span class="hljs-string">'mean'</span>, <span class="hljs-string">'x'</span>, <span class="hljs-string">'y'</span> ];
<span class="hljs-keyword">var</span> x;
<span class="hljs-keyword">var</span> y;
<span class="hljs-keyword">var</span> d;
<span class="hljs-keyword">var</span> i;
<span class="hljs-keyword">var</span> j;

<span class="hljs-keyword">for</span> ( i = <span class="hljs-number">0</span>; i &#x3C; <span class="hljs-number">100</span>; i++ ) {
    x = ( randu()*<span class="hljs-number">1.0e4</span> ) - <span class="hljs-number">5.0e3</span>;
    y = ( randu()*<span class="hljs-number">1.0e4</span> ) - <span class="hljs-number">5.0e3</span>;
    <span class="hljs-keyword">for</span> ( j = <span class="hljs-number">0</span>; j &#x3C; scales.length; j++ ) {
        d = reldiff( x, y, scales[j] );
        <span class="hljs-built_in">console</span>.log( <span class="hljs-string">'x = %d. y = %d. d = %d. scale: %s.'</span>, x, y, d, scales[j] );
    }
}
</code></pre></section><section class="related"><hr><h2 id="see-also">See Also</h2><ul><li><span class="package-name"><a href="/docs/api/latest/@stdlib/math/base/utils/absolute-difference"><code>@stdlib/math/base/utils/absolute-difference</code></a></span><span class="delimiter">: </span><span class="description">compute the absolute difference of two real numbers.</span></li><li><span class="package-name"><a href="/docs/api/latest/@stdlib/math/base/utils/float64-epsilon-difference"><code>@stdlib/math/base/utils/float64-epsilon-difference</code></a></span><span class="delimiter">: </span><span class="description">compute the relative difference of two real numbers in units of double-precision floating-point epsilon.</span></li></ul></section><section class="links"></section>