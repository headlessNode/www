<h1 id="continued-fraction">continued-fraction</h1><blockquote><p><a href="https://en.wikipedia.org/wiki/Continued_fraction">Continued fraction</a> approximation.</p></blockquote><section class="usage"><h2 id="usage">Usage</h2><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> continuedFraction = <span class="hljs-built_in">require</span>( <span class="hljs-string">'@stdlib/math/base/tools/continued-fraction'</span> );
</code></pre><h4 id="continuedfraction-generator-options--">continuedFraction( generator[, options ] )</h4><p>Evaluates the continued fraction described by the supplied <code>generator</code> argument. <code>generator</code> can be either a function which returns an array with two elements, the <code>a</code> and <code>b</code> terms of the fraction, or an ES6 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*">Generator object</a>. By default, the function computes</p><div class="equation" align="center" data-raw-text="\frac{a_1}{b_1+\frac{a_2}{b_2+\frac{a_3}{b_3+\frac{a_4}{b_4}+\ldots}}}" data-equation="eq:continued_fraction_a"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.572ex" height="10.343ex" style="vertical-align:-7.505ex" viewBox="0 -1221.9 7565.5 4453.1" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" aria-labelledby="MathJax-SVG-1-Title"><title id="MathJax-SVG-1-Title">ContinuedFraction a 1 Over b 1 plus StartFraction a 2 Over b 2 plus StartFraction a 3 Over b 3 plus StartFraction a 4 Over b 4 EndFraction plus ellipsis</title><defs aria-hidden="true"></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)" aria-hidden="true"><g transform="translate(120,0)"><g transform="translate(3171,676)"></g><g transform="translate(60,-917)"><g transform="translate(1884,0)"><g transform="translate(342,0)"><g transform="translate(2063,584)"></g><g transform="translate(60,-768)"><g transform="translate(1212,0)"><g transform="translate(120,0)"><g transform="translate(1319,569)"></g><g transform="translate(60,-802)"><g transform="translate(1038,0)"><g transform="translate(120,0)"><g transform="translate(60,530)"></g><g transform="translate(88,-451)"></g></g></g></g></g></g></g></g></g></g></g></g></svg></div><p>Using an ES6 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*">Generator object</a>:</p><pre><code class="hljs language-javascript"><span class="hljs-comment">// Continued fraction for (e-1)^(-1):</span>
<span class="hljs-keyword">var</span> gen = generator();
<span class="hljs-keyword">var</span> out = continuedFraction( gen );
<span class="hljs-comment">// returns ~0.582</span>

<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">generator</span>() </span>{
    <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span> ( <span class="hljs-literal">true</span> ) {
        i += <span class="hljs-number">1</span>;
        <span class="hljs-keyword">yield</span> [ i, i ];
    }
}
</code></pre><p>Alternatively, one can use a closure to achieve the same goal:</p><pre><code class="hljs language-javascript"><span class="hljs-comment">// Continued fraction for (e-1)^(-1):</span>
<span class="hljs-keyword">var</span> gen = generator();
<span class="hljs-keyword">var</span> out = continuedFraction( gen );
<span class="hljs-comment">// returns ~0.582</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generator</span>() </span>{
    <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> gen;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gen</span>() </span>{
        i += <span class="hljs-number">1</span>;
        <span class="hljs-keyword">return</span> [ i, i ];
    }
}
</code></pre><p>The function accepts the following <code>options</code>:</p><ul><li><strong>maxIter</strong>: <code>integer</code> denoting the maximum number of times the supplied generator object will be called. Default: <code>1000000</code>.</li><li><strong>tolerance</strong>: <code>number</code> primitive specifying the used tolerance to assess convergence. Default: <code>2.22e-16</code>.</li><li><strong>keep</strong>: <code>boolean</code> primitive indicating whether to keep the <code>b0</code> term in the continued fraction. Default: <code>false</code>.</li></ul><p>To evaluate</p><div class="equation" align="center" data-raw-text="b_0 + \frac{a_1}{b_1+\frac{a_2}{b_2+\frac{a_3}{b_3+\frac{a_4}{b_4}+\ldots}}}" data-equation="eq:continued_fraction_b"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="22.464ex" height="10.343ex" style="vertical-align:-7.505ex" viewBox="0 -1221.9 9671.8 4453.1" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" aria-labelledby="MathJax-SVG-1-Title"><title id="MathJax-SVG-1-Title">b 0 plus ContinuedFraction a 1 Over b 1 plus StartFraction a 2 Over b 2 plus StartFraction a 3 Over b 3 plus StartFraction a 4 Over b 4 EndFraction plus ellipsis</title><defs aria-hidden="true"></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)" aria-hidden="true"><g transform="translate(1884,0)"><g transform="translate(342,0)"><g transform="translate(3171,676)"></g><g transform="translate(60,-917)"><g transform="translate(1884,0)"><g transform="translate(342,0)"><g transform="translate(2063,584)"></g><g transform="translate(60,-768)"><g transform="translate(1212,0)"><g transform="translate(120,0)"><g transform="translate(1319,569)"></g><g transform="translate(60,-802)"><g transform="translate(1038,0)"><g transform="translate(120,0)"><g transform="translate(60,530)"></g><g transform="translate(88,-451)"></g></g></g></g></g></g></g></g></g></g></g></g></g></svg></div><p>set the <code>keep</code> option to <code>true</code>.</p><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> out = continuedFraction( generator(), {
    <span class="hljs-string">'keep'</span>: <span class="hljs-literal">true</span>
});
<span class="hljs-comment">// returns ~1.718</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generator</span>() </span>{
    <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> gen;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gen</span>() </span>{
        i += <span class="hljs-number">1</span>;
        <span class="hljs-keyword">return</span> [ i, i ];
    }
}
</code></pre><p>To change the maximum number of iterations, set the <code>maxIter</code> option.</p><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> out = continuedFraction( generator(), {
    <span class="hljs-string">'maxIter'</span>: <span class="hljs-number">10</span>
});
<span class="hljs-comment">// returns ~0.582</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generator</span>() </span>{
    <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> gen;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gen</span>() </span>{
        i += <span class="hljs-number">1</span>;
        <span class="hljs-keyword">return</span> [ i, i ];
    }
}
</code></pre><p>The default tolerance of <code>2.22e-16</code> to assess convergence can be changed via the <code>tolerance</code> option.</p><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> out = continuedFraction( generator(), {
    <span class="hljs-string">'tolerance'</span>: <span class="hljs-number">1e-1</span>
});
<span class="hljs-comment">// returns ~0.579</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generator</span>() </span>{
    <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> gen;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gen</span>() </span>{
        i += <span class="hljs-number">1</span>;
        <span class="hljs-keyword">return</span> [ i, i ];
    }
}
</code></pre></section><section class="examples"><h2 id="examples">Examples</h2><pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> continuedFraction = <span class="hljs-built_in">require</span>( <span class="hljs-string">'@stdlib/math/base/tools/continued-fraction'</span> );
<span class="hljs-keyword">var</span> out;

<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">generator</span>() </span>{
    <span class="hljs-keyword">while</span> ( <span class="hljs-literal">true</span> ) {
        <span class="hljs-keyword">yield</span> [ <span class="hljs-number">1</span>, <span class="hljs-number">1</span> ];
    }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">closure</span>() </span>{
    <span class="hljs-keyword">var</span> ones = [ <span class="hljs-number">1</span>, <span class="hljs-number">1</span> ];
    <span class="hljs-keyword">return</span> gen;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gen</span>() </span>{
        <span class="hljs-keyword">return</span> ones;
    }
}

out = continuedFraction( generator(), {
    <span class="hljs-string">'keep'</span>: <span class="hljs-literal">true</span>
});
<span class="hljs-built_in">console</span>.log( <span class="hljs-string">'Golden ratio (generator): %d,'</span>, out );

out = continuedFraction( closure(), {
    <span class="hljs-string">'keep'</span>: <span class="hljs-literal">true</span>
});
<span class="hljs-built_in">console</span>.log( <span class="hljs-string">'Golden ratio (closure): %d'</span>, out );
</code></pre></section>